<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatGPT Micro-Cap Experiment</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css" />
</head>
<body>
    <header>
        <h1>ChatGPT Micro-Cap Experiment</h1>
        <nav>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#portfolio">Portfolio</a></li>
                <li><a href="#trade-log">Trade Log</a></li>
                <li><a href="#graphs">Graphs</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="https://github.com/LuckyOne7777/ChatGPT-Micro-Cap-Experiment" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                <li><a href="https://nathanbsmith729.substack.com" target="_blank" rel="noopener noreferrer">Blog</a></li>
                <li><a href="/login">Login</a></li>
                <li><a href="/signin">Sign Up</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div id="errorMessage" class="visually-hidden" role="alert" aria-live="polite"></div>
        <section id="home">
            <div class="summary-cards">
                <div class="card">
                    <h3>Current Total Equity</h3>
                    <p><span id="totalEquity">--</span> <span id="equityChange"></span></p>
                </div>
                <div class="card">
                    <h3>Cash Balance</h3>
                    <p id="cashBalance">--</p>
                </div>
                <div class="card">
                    <h3>Deployed Capital</h3>
                    <p id="deployedCapital">--</p>
                </div>
                <div class="card">
                    <h3>Number of Trades</h3>
                    <p id="numTrades">0</p>
                </div>
                <div class="card">
                    <h3>Win Rate</h3>
                    <p id="winRate">0%</p>
                </div>
            </div>
        </section>

        <section id="graphs">
            <h2>Portfolio vs Benchmark</h2>
            <div id="equityChartWrapper" style="position: relative; height: 400px;">
                <canvas id="equityChart"></canvas>
                <p id="noDataMessage" class="visually-hidden">No data available</p>
            </div>
            <button id="resetZoomBtn" class="visually-hidden">Reset Zoom</button>
        </section>

        <section id="portfolio">
            <h2>Portfolio</h2>
                <button id="processPortfolioBtn">Process Portfolio</button>
                <button id="forceProcessPortfolioBtn">Force Process</button>
                <div id="processMessage" class="visually-hidden" role="status" aria-live="polite"></div>
            <div class="table-container">
                <table>
                    <caption class="visually-hidden">Current portfolio positions</caption>
                    <thead>
                        <tr>
                            <th>Ticker</th>
                            <th>Shares</th>
                            <th>Buy Price</th>
                            <th>Current Price</th>
                            <th>Position Value</th>
                            <th>PnL</th>
                        </tr>
                    </thead>
                    <tbody id="portfolioTableBody"></tbody>
                </table>
            </div>
        </section>

        <section id="trade-form">
            <h2>Place Trade</h2>
            <form id="tradeForm">
                <label class="visually-hidden" for="trade-ticker">Ticker</label>
                <input type="text" id="trade-ticker" placeholder="Ticker" required>

                <label class="visually-hidden" for="trade-action">Action</label>
                <select id="trade-action">
                    <option value="buy">Buy</option>
                    <option value="sell">Sell</option>
                </select>
                
                <label class="visually-hidden" for="trade-price">Price</label>
                <input type="number" step="0.01" id="trade-price" placeholder="Price" required>

                <label class="visually-hidden" for="trade-shares">Shares</label>
                <input type="number" step="1" id="trade-shares" placeholder="Shares" required>

                <label class="visually-hidden" for="trade-stop-loss">Stop Loss (optional)</label>
                <input type="text" id="trade-stop-loss" placeholder="Stop Loss (Buys only)">

                <label class="visually-hidden" for="trade-reason">Reason (optional)</label>
                <input type="text" id="trade-reason" placeholder="Reason (optional)">

                <button type="submit">Submit Trade</button>
            </form>
            <span id="tradeErrorMessage" class="visually-hidden" role="alert" aria-live="polite"></span>
        </section>

        <section id="trade-log">
            <h2>Trade Log</h2>
            <div class="table-container">
                <table>
                    <caption class="visually-hidden">Trade history</caption>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Ticker</th>
                            <th>Buy/Sell</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody id="tradeLogBody"></tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 ChatGPT Micro-Cap Experiment. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Time adapter for Chart.js (must load after Chart.js) -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script src="/script.js"></script>
  </body>
</html>
